# Test Environment Configuration
# Copy this file to .env.test and fill in actual test values
# NEVER commit .env.test with real credentials

# =============================================================================
# APPLICATION
# =============================================================================
TEST_ENV=local
BASE_URL=http://localhost:3000
API_URL=http://localhost:3000/api
NODE_ENV=test

# =============================================================================
# DATABASE (Test Database - Separate from Development)
# =============================================================================
# Use a separate test database to avoid polluting development data
DATABASE_URL=postgresql://user:password@localhost:5432/jabur_test
REDIS_URL=redis://localhost:6379

# =============================================================================
# AUTHENTICATION (NextAuth.js v5)
# =============================================================================
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=test-secret-change-in-production
NEXTAUTH_URL=http://localhost:3000

# =============================================================================
# TEST USER CREDENTIALS
# =============================================================================
# Seed these users in test database for E2E tests
TEST_CLIENT_EMAIL=client@test.com
TEST_CLIENT_PASSWORD=Test123!Client

TEST_CREATOR_EMAIL=creator@test.com
TEST_CREATOR_PASSWORD=Test123!Creator

TEST_EDITOR_EMAIL=editor@test.com
TEST_EDITOR_PASSWORD=Test123!Editor

TEST_ADMIN_EMAIL=admin@test.com
TEST_ADMIN_PASSWORD=Test123!Admin

# =============================================================================
# PAYMENT PROVIDERS (Test/Sandbox Credentials)
# =============================================================================

# Stripe (Test Mode)
STRIPE_SECRET_KEY=sk_test_your_test_key_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_test_key_here
STRIPE_WEBHOOK_SECRET=whsec_test_your_webhook_secret_here

# M-Pesa Daraja API (Sandbox)
MPESA_CONSUMER_KEY=your_sandbox_consumer_key
MPESA_CONSUMER_SECRET=your_sandbox_consumer_secret
MPESA_SHORTCODE=174379
MPESA_PASSKEY=your_sandbox_passkey
MPESA_ENVIRONMENT=sandbox
MPESA_CALLBACK_URL=http://localhost:3000/api/webhooks/mpesa/callback

# =============================================================================
# EXTERNAL SERVICES (Test/Sandbox Accounts)
# =============================================================================

# Resend (Test API Key)
RESEND_API_KEY=re_test_your_test_key_here
RESEND_FROM_EMAIL=test@example.com

# Cloudinary (Separate Test Account)
CLOUDINARY_URL=cloudinary://key:secret@cloud_name
CLOUDINARY_CLOUD_NAME=test-cloud
CLOUDINARY_API_KEY=test-api-key
CLOUDINARY_API_SECRET=test-api-secret

# AssemblyAI (Test API Key)
ASSEMBLYAI_API_KEY=test-assemblyai-key

# =============================================================================
# SOCKET.IO (Real-Time Testing)
# =============================================================================
SOCKET_IO_PATH=/socket.io
SOCKET_IO_CORS_ORIGIN=http://localhost:3000

# =============================================================================
# BULLMQ (Background Jobs - Use Redis #1 for queues)
# =============================================================================
BULLMQ_REDIS_URL=redis://localhost:6379/1

# =============================================================================
# FEATURE FLAGS (Test-Specific Overrides)
# =============================================================================
FEATURE_FLAG_ENABLE_MPESA=true
FEATURE_FLAG_ENABLE_SOCKET_IO=true
FEATURE_FLAG_ENABLE_BACKGROUND_JOBS=true

# =============================================================================
# TEST CONFIGURATION
# =============================================================================
# Playwright
PLAYWRIGHT_HEADLESS=true
PLAYWRIGHT_SLOWMO=0
PLAYWRIGHT_TIMEOUT=60000

# Test Data Seeding
AUTO_SEED_TEST_DATA=true
CLEANUP_TEST_DATA=true

# Mock External APIs (set to true to avoid calling real APIs)
MOCK_STRIPE=false
MOCK_MPESA=false
MOCK_RESEND=false
MOCK_CLOUDINARY=false
MOCK_ASSEMBLYAI=false
